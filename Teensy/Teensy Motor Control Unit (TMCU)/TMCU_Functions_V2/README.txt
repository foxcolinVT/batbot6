Teeny Motor Control Unit (TMCU)

The TMCU controls both the pan tilt unit and the stepper motors.
This script serves to enact motor control commands. 
Motor control commands are generated by the Jetson, passed down through the M4 
and communicated to the Teensy via serial connection.



SETUP

Wiring Connections:
			Pins 0 - (NUM_SERVOS):		Servo Control Connection 		(max of 12 servos, limited by Arduino. Opcode could potentially support 16 servos)
			Pin 14:				Serial3 Tx
			Pin 15:				Serial3 Rx
			Pins 16-19:			Left Stepper				(See Arduino documentation for stepper wiring. Bipolar stepper wires are arranged in pairs that will read as shorts on a multimeter)
			Pins 20-23:			Right Stepper

Download and install teensy software at https://www.pjrc.com/teensy/td_download.html





SERVOS:
General info:
	Which servo corresponds to what function is undefined at the time of writing.
	The number of controllable servos can be adjusted by changing NUM_SERVOS.
	Servo 0 will be at pin 0, servo 1 will be at pin 1 and so on.
	Servo control is written for traditional (0-180 deg) servos. 
	Servo control data should be mapped as 1-1, where an input of 180 corresponds to a servo movement of 180 degrees.

Moving a servo:
	M4 sends Teensy an opcode of 0bXXXX0010 (0xX2) to indicate "move a servo"
	Upper nybble corresponds to which servo-	
							0x02 means "move servo 0"
							0x22 means "move servo 2"
							0x92 means "move servo 9"
	Next byte describes where to move said servo-
							0x00 means "move to 0"
							0x58 means "move to 90"
							0xB4 means "move to 180"

	The loop receives this info and calls the move servo function, which interprets which servo to move where.




STEPPERS:
General info:
	As of writing, we have 2 Steppers only capable of relative motion, meaning they only move relative to where they started.

	This could be remedied by either getting motors with feedback or by 
	engineering a reference point for the steppers to index off of.
	(like the end of travel sensors for 3D printers).
	Steppers receive relative motion commands from the M4.

Moving a Stepper:
	M4 sends Teensy an opcode of 0bXXXX0011 (0xX3)
	The MSB of this opcode corresponds to which motor is being moved (1 for left, 0 for right)
	Second MSB of this opcode corresponds to which direction the motor is being moved (1 for left, 0 for right)
	What each opcode means - 			0b00000011 means "Move right stepper right"
							0b01000011 means "Move right stepper left"
							0b10000011 means "Move left stepper right"
							0b11000011 means "Move left stepper left"
	
	Next byte contains number of steps to move. This direcly relates to the number of steps.
							0x01 means "move by one step"
							0x40 means "move by 64 steps"	

	Loop recieves this info and calls the move stepper function which interpretes which stepper to move, 
	by how many steps and in what direction.	